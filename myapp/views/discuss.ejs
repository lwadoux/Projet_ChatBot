<html>
  <head>
    <title>Simple ChatAI using RiveScript.js</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
  </head>
  <body>

    <div class="chat">

      <div class="messages"></div>
      <div id="edge"></div>

      <textarea id="cequetuveux"></textarea>
      <input id="inputsituveux" type="text" placeholder="press Enter to send message">

    </div>

    <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script>
      $('#inputsituveux').keyup(function (e) {
        if (e.keyCode === 13) {
          var history = $('#cequetuveux');
          var content = $('#inputsituveux').val();
          $('#inputsituveux').val("");

          history.append('> ' + content + '\n');
          if(history.length)
            history.scrollTop(history[0].scrollHeight - history.height());

          $.ajax({
            url: "/letschat/reply",
            type: 'post',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify({"message": content}),
            success: function (data) {
              history.append('# ' + data['reply'] + '\n');
            },
            error: function (err) {
              history.append('! Oupsie: ' + err.responseText + '\n');
            }
          });
        }
      });
    </script>


  </body>
</html>
